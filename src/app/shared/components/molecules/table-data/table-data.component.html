<ng-container>
  <section *ngIf="_dataSource && _dataSource.data.length > 0" class="my-20">
    <mat-form-field>
      <mat-label>Buscar coinicidencias por: </mat-label>
      <input matInput (keyup)="applyFilter($event)" #input />
    </mat-form-field>

    <div class="mat-elevation-z4">
      <table mat-table matSort [dataSource]="_dataSource" class="mat-elevation-z8">
        <ng-container *ngFor="let column of columnsTable; let i = index" [matColumnDef]="column.columnDef">
          <th
            mat-header-cell
            *matHeaderCellDef
            mat-sort-header
            [ngClass]="{ 'is-actionShow': hasActionShow(column.columnDef) }">
            {{ column.header }}
          </th>
          <td
            mat-cell
            *matCellDef="let row"
            [ngClass]="{ 'is-actionShow': hasActionShow(column.columnDef) }">
            <ng-container [ngSwitch]="column.columnDef">
              <ng-container
                *ngSwitchCase="'show'"
                [ngTemplateOutlet]="actionShow"
                [ngTemplateOutletContext]="{ row: row, column: column, icon: 'visibility' }"></ng-container>
              <ng-container
                *ngSwitchCase="'edit'"
                [ngTemplateOutlet]="actionShow"
                [ngTemplateOutletContext]="{ row: row, column: column, icon: 'edit' }"></ng-container>
              <ng-container
                *ngSwitchCase="'download'"
                [ngTemplateOutlet]="actionShow"
                [ngTemplateOutletContext]="{ row: row, column: column, icon: 'download' }"></ng-container>
              <ng-container
                *ngSwitchCase="'delete'"
                [ngTemplateOutlet]="actionShow"
                [ngTemplateOutletContext]="{ row: row, column: column, icon: 'delete' }"></ng-container>
              <ng-container
                *ngSwitchDefault
                [ngTemplateOutlet]="simpleContent"
                [ngTemplateOutletContext]="{ row: row, column: column }"></ng-container>
            </ng-container>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>

      <mat-paginator
        [pageSize]="5"
        [length]="_dataSource.data.length"
        [pageSizeOptions]="[5, 10, 25, 100]"
        aria-label="Seleccionar pÃ¡gina de usuarios">
      </mat-paginator>
    </div>
  </section>

  <ng-container *ngIf="_dataSource.data.length == 0">
    <app-empty-data-table [title]="emptyTitleTable"></app-empty-data-table>
  </ng-container>
</ng-container>

<ng-template #actionShow let-row="row" let-column="column" let-icon="icon">
  <button
    mat-mini-fab
    aria-label="Ver Usuario"
    color="primary"
    class="hover:bg-neutral-900 shadow-md"
    [routerLink]="row[column.columnDef]">
    <mat-icon class="text-emerald-50 hover:text-white w-auto h-auto">{{ icon }}</mat-icon>
  </button>
</ng-template>

<ng-template #simpleContent let-row="row" let-column="column">
  {{ row[column.columnDef] }}
</ng-template>
